# alog
alog (Append-only Log) is an easy way to start using the Lambda/Kappa architecture in your Elixir/Phoenix Apps while still using PostgreSQL (with Ecto).

This module is an Ecto Adapter that extends the default Postgres adapter with functionality to ensure data is only ever appended, never deleted or edited.

## Usage

 In your Repo module, when defining your Ecto Repo, set the adapter to be this module, Alog

 ``` elixir
  defmodule MyApp.Repo do
    use Ecto.Repo,
      otp_app: :my_app,
      adapter: Alog
  end
 ```

## Considerations

- When inserting or updating an item, the return value of the insert/update function is currently incorrect. The updates and inserts are however done correctly, as you will see if you get all items from the database using `Repo.all`.

- We exclude the `schema_migrations` file from all alog functions, instead forwarding them on to the original Postgres Adapter.

- The autogenerated cid is used as the primary key. There is no way currently to define a custom primary key.

Hopefully these issues can later be resolved by looking at defining/extending our own version of the the `Ecto.Schema` macro.